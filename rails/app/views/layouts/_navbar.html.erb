<header class="navbar navbar-expand-md d-print-none">
  <div class="container-xl">
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbar-menu"
      aria-controls="navbar-menu"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <a href="/" aria-label="home" class="navbar-brand navbar-brand-autodark me-3">
      <span class="nav-link-icon" style="color: red;"><%= tabler_icon('fall') %></span>
      <span>my app</span>
    </a>

    <ul class="navbar-nav">
      <li class="nav-item active">
        <%= link_to home_path, class: "nav-link" do %>
          <span class="nav-link-icon"><%= tabler_icon('home') %></span>
          <span class="nav-link-title"> Home </span>
        <% end %>
      </li>
      <li class="nav-item active">
        <%= link_to welcome_path, class: "nav-link" do %>
          <span class="nav-link-icon"><%= tabler_icon('hand-love-you') %></span>
          <span class="nav-link-title"> Welcome </span>
        <% end %>
      </li>

      <li>
        <button id="theme-toggle" class="btn btn-primary">Toggle Dark Mode</button>
        <script>
        document.getElementById('theme-toggle').addEventListener('click', function() {
          const html = document.documentElement;
          const currentTheme = html.getAttribute('data-bs-theme') || html.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
          html.setAttribute('data-bs-theme', newTheme);
          html.setAttribute('data-theme', newTheme);
        });
        </script>
      </li>
    </ul>

              <%# style="background-image: url(/images/image.jpg)" %>

    <% if defined?(rodauth) && rodauth.logged_in? %>
      <% user = current_user %>
      <% profile = user.profile %>


      <div class="navbar-nav flex-row order-md-last ms-auto">
        <div class="nav-item dropdown">
          <a
            href="#"
            class="nav-link d-flex lh-1 text-reset"
            data-bs-toggle="dropdown"
            aria-label="Open user menu"
          >
            <span
              class="avatar avatar-sm"
            ><%= image_tag profile.image, alt: profile.name_given, class: "w-8 h-8 rounded-full" %></span>
            <div class="d-none d-xl-block ps-2">
              <div><%= profile.name_given %></div>
              <div class="mt-1 small text-secondary">UI Designer</div>
            </div>
          </a>
          <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
            <a href="#" class="dropdown-item"><%= profile.name_given %></a>

            <%= link_to Profile, profile_path(current_user), class: "dropdown-item" %>

            <a href="#" class="dropdown-item">Feedback</a>
            <div class="dropdown-divider"></div>
            <a href="./settings.html" class="dropdown-item">Settings</a>
            <%= link_to "Sign out", rodauth.logout_path, method: :post, class: "dropdown-item" %>
          </div>
        </div>
      </div>

    <% else %>
      <%= button_to 'Get started', rodauth.login_path, class: "" %>
    <% end %>

  </div>
</header>

